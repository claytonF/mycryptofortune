<header>
  <p>profit<sup>*</sup></p>
  <h1>£{{totalProfit | number : '1.2-2'}}</h1>
  <p>Total value of assets £{{totalValueGbp | number : '1.2-2'}}</p>
  <div class="refresh" (click)="refreshDate()">{{profitDifference >= 0 ? 'up' : 'down'}} by £{{profitDifference | number : '1.2-2'}} since you last checked<i class="fi fi-rr-refresh"></i></div>
  
</header>

<div class="card-container">
  <div class="asset" *ngFor="let asset of assetData">
    <div class="asset-data-container">
      <div class="asset-data card">
        <div class="asset-actions">
          <div class="edit-asset-btn" (click)="setEditAssetFormData(asset, $event)"><i class="fi fi-rr-edit"></i></div>
        </div>
        <h4>{{asset.asset_name}} ({{asset.asset_abbrev}})</h4>
        <div class="profit-container" [ngClass]="asset.profit_gbp > 0 ? 'profit' : 'loss'" >
          <div>
            <span>PROFIT</span>
            <h2>£{{asset.profit_gbp | number : '1.2-2'}}</h2>
          </div>
        </div>
        <ul class="meta-data">
          <li>amount held<h5>{{asset.asset_held}}</h5></li>
          <li>Value (GBP): <h5>£{{asset.value_gbp | number : '1.2-2'}}</h5></li>
          <li>Value (USD): <h5>${{asset.value_usd | number : '1.2-2'}}</h5></li>
        </ul>
        <div class="wallet">Wallet: {{asset.asset_wallet}}</div>
      </div>
      <div class="edit-asset card">
        <div class="asset-actions">
          <div class="cancel-edit" (click)="cancelEditAssetFormData($event)"><i class="fi fi-rr-cross"></i></div>
        </div>
        <h4>{{asset.asset_name}} ({{asset.asset_abbrev}})</h4>
        <form [formGroup]="editAssetformdata" (ngSubmit) = "updateAsset(editAssetformdata.value)">
          <div>
            <label>held</label>
            <input type="number" class="fortextbox" name="asset_held" value="{{asset.asset_held}}" 
            formControlName="asset_held" />
          </div>
          <div>
            <label>invested</label>
            <input type = "number" class = "fortextbox" name = "asset_invested" value="{{asset.asset_invested}}" 
            formControlName="asset_invested" />
          </div>
          <div>
            <label>wallet</label>
            <input type="text" class="fortextbox" name="asset_wallet" value="{{asset.asset_wallet}}"
            formControlName="asset_wallet" />
          </div>
          <input type="hidden" class="fortextbox" name="asset_abbrev" value="{{asset.asset_abbrev}}" 
          formControlName="asset_abbrev">
          <input type="hidden" class="fortextbox" name="asset_sort_order" value="{{asset.asset_sort_order}}" 
          formControlName="asset_sort_order">
          <input class="submit-btn" type="submit" value="update asset" />
          <div class="delete-asset" (click)="deleteAsset(asset)"><i class="fi fi-rr-trash"></i></div>
        </form>
      </div>
    </div>
  </div>
  <div class="asset">
    <div class="asset-data-container">
      <div class="add-asset-front card">
        <h4>Add asset</h4>
        <div class="add-asset-btn-container">
          <div class="add-asset-btn" (click)="flipCard($event)"><i class="fi fi-rr-add"></i></div>
        </div>
      </div>
      <div class="add-asset-back card">
        <h4>Add asset</h4>
        <div class="asset-actions">
          <div class="add-asset-cancel-btn" (click)="flipCardBack($event)"><i class="fi fi-rr-cross"></i></div>
        </div>
        
        <form  [formGroup]="formdata" (ngSubmit) = "onClickSubmit(formdata.value)">
          <div>
            <select type="select" class="fortextbox" name="asset_abbrev"  
            formControlName="asset_abbrev">
              <option value="" disabled selected>Select coin</option>
              <option value="{{asset.symbol}}" *ngFor="let asset of asset_list">{{asset.symbol}} ({{asset.name}})</option>
              <option value="HOT">HOT (HoloCoin)</option>
            </select>
          </div>
          <div>
            <input type = "number" class = "fortextbox" name = "asset_held" placeholder = "quantity you hold" 
            formControlName="asset_held" />
          </div>
          <div>
            <input type = "number" class = "fortextbox" name = "asset_invested" placeholder = "£ you have invested" 
            formControlName="asset_invested" />
          </div>
          <div>
            <input type = "text" class = "fortextbox" name = "asset_wallet" placeholder = "asset wallet (i.e. coinbase)" 
            formControlName="asset_wallet" />
          </div>
          <div>
            <!-- <label>sort order</label> -->
            <input type = "number" class = "fortextbox" name = "asset_sort_order" placeholder = "sort order" 
            formControlName="asset_sort_order" />
          </div>
          <input class="submit-btn" type="submit" value="add asset" />
        </form>
      </div>
    </div>
  </div>
</div>